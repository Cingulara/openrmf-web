<!-- 
	// Copyright (c) Cingulara LLC 2019 and Tutela LLC 2019. All rights reserved.
	// Licensed under the GNU GENERAL PUBLIC LICENSE Version 3, 29 June 2007 license. See LICENSE file in the project root for full license information.
-->
<!DOCTYPE html>
<html lang="en">
<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		
		<title>OpenRMF Dashboard</title>
		<meta name="description" content="OpenRMF Dashboard">
		<meta name="author" content="Dale Bingham - https://www.cingulara.com">

		<!-- Favicon -->
		<link rel="shortcut icon" href="assets/images/favicon.ico">
		<link rel="apple-touch-icon" sizes="57x57" href="assets/favicons/apple-icon-57x57.png">
		<link rel="apple-touch-icon" sizes="60x60" href="assets/favicons/apple-icon-60x60.png">
		<link rel="apple-touch-icon" sizes="72x72" href="assets/favicons/apple-icon-72x72.png">
		<link rel="apple-touch-icon" sizes="76x76" href="assets/favicons/apple-icon-76x76.png">
		<link rel="apple-touch-icon" sizes="114x114" href="assets/favicons/apple-icon-114x114.png">
		<link rel="apple-touch-icon" sizes="120x120" href="assets/favicons/apple-icon-120x120.png">
		<link rel="apple-touch-icon" sizes="144x144" href="assets/favicons/apple-icon-144x144.png">
		<link rel="apple-touch-icon" sizes="152x152" href="assets/favicons/apple-icon-152x152.png">
		<link rel="apple-touch-icon" sizes="180x180" href="assets/favicons/apple-icon-180x180.png">
		<link rel="icon" type="image/png" sizes="192x192"  href="assets/favicons/android-icon-192x192.png">
		<link rel="icon" type="image/png" sizes="32x32" href="assets/favicons/favicon-32x32.png">
		<link rel="icon" type="image/png" sizes="96x96" href="assets/favicons/favicon-96x96.png">
		<link rel="icon" type="image/png" sizes="16x16" href="assets/favicons/favicon-16x16.png">
		<link rel="manifest" href="assets/favicons/manifest.json">
		<meta name="msapplication-TileColor" content="#ffffff">
		<meta name="msapplication-TileImage" content="/ms-icon-144x144.png">
		<meta name="theme-color" content="#ffffff">

		<!-- Bootstrap CSS -->
		<link href="assets/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
		
		<!-- Font Awesome CSS -->
		<link href="assets/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css" />
		
		<!-- Custom CSS -->
		<link href="assets/css/style.css" rel="stylesheet" type="text/css" />
		
		<!-- BEGIN CSS for this page -->
		<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.16/css/dataTables.bootstrap4.min.css"/>
		<link href="assets/css/pricing-tables.css" rel="stylesheet" type="text/css" />
		<link href="assets/plugins/sweetalert/sweetalert.css" rel="stylesheet" type="text/css" />
		<style>	
		td.details-control {
			background: url('assets/plugins/datatables/img/details_open.png') no-repeat center center;
			cursor: pointer;
		}
		tr.shown td.details-control {
			background: url('assets/plugins/datatables/img/details_close.png') no-repeat center center;
		}
		</style>
		<!-- END CSS for this page -->
</head>

<body class="adminbody">

	<script src="assets/js/keycloak.min.js"></script>
	<script src="./js/auth.js"></script>

	<div id="main">

	<!-- top bar navigation -->
	<div class="headerbar">

		<!-- LOGO -->
      <div class="headerbar-left">
		<a href="index.html" class="logo"><img alt="Logo" src="assets/images/logo.jpg" /> <span>Open<span>RMF</span></span></a>
	  </div>

    <nav class="navbar-custom">
		<ul class="list-inline float-right mb-0">
			<li class="list-inline-item dropdown notif">
				<a class="nav-link dropdown-toggle arrow-none" data-toggle="dropdown" href="#" role="button" title="Help and Support"
					aria-haspopup="false" aria-expanded="false">
					<i class="fa fa-fw fa-question-circle"></i>
				</a>
				<div class="dropdown-menu dropdown-menu-right dropdown-arrow dropdown-arrow-success dropdown-lg">
					<!-- item-->
					<div class="dropdown-item noti-title">
						<h5><small>Help and Support</small></h5>
					</div>

					<!-- item-->
					<a target="_blank" href="https://cingulara.github.io/openrmf-docs/" class="dropdown-item notify-item">
						<p class="notify-details ml-0">
							<b>Do you need documentation on how OpenRMF works?</b>
							<span>GitHub Pages</span>
						</p>
					</a>
				</div>
			</li>
			<li class="list-inline-item dropdown notif">
				<a class="nav-link dropdown-toggle nav-user" data-toggle="dropdown" title="Open the User Menu"
					href="#" role="button" aria-haspopup="false" aria-expanded="false">
					<img src="assets/images/avatars/avatar3.png" alt="Profile image" 
					class="avatar-rounded">
				</a>
				<div class="dropdown-menu dropdown-menu-right profile-dropdown ">
					<!-- item-->
					<div class="dropdown-item noti-title">
						<h5 class="text-overflow"><small>Hello, <span id="profileUserName"></span></small> </h5>
					</div>

					<!-- item-->
					<a id="profileAccountURL" href="" class="dropdown-item notify-item" title="Open your Profile page">
						<i class="fa fa-user"></i> <span>Profile</span>
					</a>

					<!-- item-->
					<a id="profileLogoutURL" href="" title="Logout of OpenRMF"
						class="dropdown-item notify-item"><i class="fa fa-power-off"></i> <span>Logout</span>
					</a>
				</div>
			</li>
		</ul>

		<ul class="list-inline menu-left mb-0">
			<li class="float-left">
				<button class="button-menu-mobile open-left">
					<i class="fa fa-fw fa-bars"></i>
				</button>
			</li>                        
		</ul>
    </nav>
	</div>
	<!-- End Navigation -->
 
	<!-- Left Sidebar -->
	<div class="left main-sidebar">
		<div class="sidebar-inner leftscroll">
			<div id="sidebar-menu">
			<ul>
				<li class="submenu">
					<a class="active" href="index.html" title="View your OpenRMF Dashboard"><i class="fa fa-fw fa-dashboard"></i><span> Dashboard </span> </a>
				</li>
				<li class="submenu">
					<a href="systems.html" title="View your Systems and Checklists"><i class="fa fa-fw fa-table"></i><span> Systems </span> </a>
				</li>
				<li class="submenu">
					<a href="compliance.html" title="Generate your System Compliance Listing"><i class="fa fa-fw fa-check-square-o"></i><span> Compliance </span> </a>
				</li>
				<li class="submenu">
					<a href="templates.html" title="View your OpenRMF Template Checklists"><i class="fa fa-fw fa-list"></i><span> Templates </span> </a>
				</li>
				<li class="submenu">
					<a href="/reports/index.html" title="View your OpenRMF Reporting Dashboard"><i class="fa fa-fw fa-area-chart"></i><span> Reports </span> </a>
				</li>
				<li class="submenu" id="menuUpload" title="Upload New Templates or Checklists or by System" style="display: none;">
					<a href="upload.html"><i class="fa fa-fw fa-file-text-o"></i><span> Upload </span> </a>
				</li>
				<li class="submenu" id="menuAudit" title="View Audit Records" style="display: none;">
					<a href="audit.html"><i class="fa fa-fw fa-shield"></i><span> Audit </span> </a>
				</li>
            </ul>
            <div class="clearfix"></div>
			</div>
			<div class="clearfix"></div>
		</div>
	</div>
	<!-- End Sidebar -->

    <div class="content-page">	
		<!-- Start content -->
      <div class="content">
            
			<div class="container-fluid">
				<div class="row">
					<div class="col-xl-12">
						<div class="breadcrumb-holder">
							<h1 class="main-title float-left">Dashboard</h1>
							<ol class="breadcrumb float-right">
								<li class="breadcrumb-item">Home</li>
								<li class="breadcrumb-item active">Dashboard</li>
							</ol>
							<div class="clearfix"></div>
						</div>
					</div>
				</div>
				<!-- end row -->
						
				<div class="row">

					<div class="col-xs-12 col-md-6 col-lg-6 col-xl-3 clickable" onclick="location.href='systems.html';">
						<div class="card-box noradius noborder bg-success">
							<i class="fa fa-object-group float-right text-white"></i>
							<h6 class="text-white text-uppercase m-b-20">Systems</h6>
							<h1 id="numberSystemsTotal" class="m-b-20 text-white"></h1>
							<span class="text-white"><span id="numberNewSystemsTotal"></span> New Systems</span>
						</div>
					</div>

					<div class="col-xs-12 col-md-6 col-lg-6 col-xl-3">
						<div class="card-box noradius noborder bg-default">
							<i class="fa fa-file-text-o float-right text-white"></i>
							<h6 class="text-white text-uppercase m-b-20">Checklists</h6>
							<h1 id="numberChecklistsTotal" class="m-b-20 text-white"></h1>
							<span class="text-white"><span id="numberNewChecklistsTotal"></span> New Checklists</span>
						</div>
					</div>

					<div class="col-xs-12 col-md-6 col-lg-6 col-xl-3 clickable" onclick="location.href='templates.html';">
						<div class="card-box noradius noborder bg-gray">
							<i class="fa fa-clone float-right text-white"></i>
							<h6 class="text-white text-uppercase m-b-20">Templates</h6>
							<h1 id="numberTemplatesTotal" class="m-b-20 text-white"></h1>
							<span class="text-white"><span id="numberNewTemplatesTotal"></span> New Templates</span>
						</div>
					</div>

					<div class="col-xs-12 col-md-6 col-lg-6 col-xl-3">
						<div class="card-box noradius noborder bg-warning">
							<i class="fa fa-code float-right text-white"></i>
							<h6 class="text-white text-uppercase m-b-20">Version</h6>
							<h1 class="m-b-20 text-white">0.12</h1>
							<span class="text-white">beta release</span>
						</div>
					</div>
				</div>
				<!-- end row -->
				
				<div class="row">
					<div class="col-xl-12">
						<div class="breadcrumb-holder">
							<h1 class="main-title float-left">Nessus ACAS Patch Scans</h1>
							<div class="clearfix"></div>
						</div>
					</div>
				</div>
				<!-- end row -->
		
				<div class="row">
					<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 col-xl-12">
						<div class="card mb-3">
							<div class="card-header">
								<h3><i class="fa fa-table"></i> Critical and High Findings</h3>
							</div>			
							<div class="card-body">
								<div class="small">Choose a system to display its ACAS Scan Item Dashboard</div>
								<select class="form-control" style="width: 50%;" id="checklistACASSystem" onchange="getSystemACASItemsForDashboard();">
									<option value="">[Choose a System]</option>
								</select>
								<br />
								<div id="divNessusStatus" style="display: none;" class="alert alert-warning alert-dismissible fade show" role="alert"></div>
								<div class="row" id="divSystemACASPatchListing" style="display: none;">
									<div class="col-xs-12 col-md-6 col-lg-6 col-xl-3">
										<div class="card-box noradius noborder tabco4">
											<i class="fa fa-times-circle float-right text-white"></i>
											<h6 class="text-white text-uppercase m-b-20">Critical</h6>
											<h1 id="numberCriticalOpen" class="m-b-20 text-white"></h1>
											<span class="text-white">Open items</span>
										</div>
									</div>
									<div class="col-xs-12 col-md-6 col-lg-6 col-xl-3">
										<div class="card-box noradius noborder tabco4">
											<i class="fa fa-exclamation float-right text-white"></i>
											<h6 class="text-white text-uppercase m-b-20">High</h6>
											<h1 id="numberHighOpen" class="m-b-20 text-white"></h1>
											<span class="text-white">Open Items</span>
										</div>
									</div>
									<div class="col-xs-12 col-md-6 col-lg-6 col-xl-3">
										<div class="card-box noradius noborder tabco6">
											<i class="fa fa-exclamation-triangle float-right text-white"></i>
											<h6 class="text-white text-uppercase m-b-20">Medium</h6>
											<h1 id="numberMediumOpen" class="m-b-20 text-white"></h1>
											<span class="text-white">Open Items</span>
										</div>
									</div>
									<div class="col-xs-12 col-md-6 col-lg-6 col-xl-3">
										<div class="card-box noradius noborder tabco7">
											<i class="fa fa-bell float-right text-white"></i>
											<h6 class="text-white text-uppercase m-b-20">Medium</h6>
											<h1 id="numberLowOpen" class="m-b-20 text-white"></h1>
											<span class="text-white">Open Items</span>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>		
				</div>
				<!-- end row -->

				<div class="row">
					<div class="col-xl-12">
						<div class="breadcrumb-holder">
							<h1 class="main-title float-left">SCAP Scans &amp; Checklists</h1>
							<div class="clearfix"></div>
						</div>
					</div>
				</div>
				<!-- end row -->
				<div class="row">
					<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 col-xl-12">
						<div class="card mb-3">
							<div class="card-header">
								<h3><i class="fa fa-exclamation"></i> High, Medium &amp; Low Open Items</h3>
							</div>								
							<div class="card-body">
								<div class="small">Choose a system to display its Open Item Dashboard</div>
								<select class="form-control" style="width: 50%;" id="checklistSystem" onchange="getSystemOpenItemsForDashboard();">
									<option value="">[Choose a System]</option>
								</select>
								<br />
								<div class="row" id="divSystemCategoryDashboard" style="display: none;">
									<div class="col-xs-12 col-md-6 col-lg-6 col-xl-4">
										<div class="card-box noradius noborder tabco4 clickable" onclick="loadSystemFromDashboardCategory(1);">
											<i class="fa fa-exclamation float-right text-white"></i>
											<h6 class="text-white text-uppercase m-b-20">High</h6>
											<h1 id="numberCAT1Open" class="m-b-20 text-white"></h1>
											<span class="text-white"><span id="numberCAT1OpenItems"></span> Open High (CAT 1)</span>
										</div>
									</div>
				
									<div class="col-xs-12 col-md-6 col-lg-6 col-xl-4 clickable" onclick="loadSystemFromDashboardCategory(2);">
										<div class="card-box noradius noborder tabco6">
											<i class="fa fa-exclamation-triangle float-right text-white"></i>
											<h6 class="text-white text-uppercase m-b-20">Medium</h6>
											<h1 id="numberCAT2Open" class="m-b-20 text-white"></h1>
											<span class="text-white"><span id="numberCAT2OpenItems"></span> Open Medium (CAT 2)</span>
										</div>
									</div>
				
									<div class="col-xs-12 col-md-6 col-lg-6 col-xl-4 clickable" onclick="loadSystemFromDashboardCategory(3);">
										<div class="card-box noradius noborder tabco7">
											<i class="fa fa-bell float-right text-white"></i>
											<h6 class="text-white text-uppercase m-b-20">Low</h6>
											<h1 id="numberCAT3Open" class="m-b-20 text-white"></h1>
											<span class="text-white"><span id="numberCAT3OpenItems"></span> Open Low (CAT 3)</span>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>		
				</div>
				<!-- end row -->

			</div>
			<!-- END container-fluid -->

		</div>
		<!-- END content -->

    </div>
	<!-- END content-page -->
    
	<footer class="footer">
		<span class="text-right">
		&copy; <a target="_blank" href="https://www.cingulara.com/">Cingulara 2019</a>
		</span>
		<span class="float-right">
		Powered by <a target="_blank" href="https://www.pikeadmin.com"><b>Pike Admin</b></a>
		</span>
	</footer>

</div>
<!-- END main -->

<script src="assets/js/modernizr.min.js"></script>
<script src="assets/js/jquery.min.js"></script>
<script src="assets/js/moment.min.js"></script>
		
<script src="assets/js/popper.min.js"></script>
<script src="assets/js/bootstrap.min.js"></script>

<script src="assets/js/detect.js"></script>
<script src="assets/js/fastclick.js"></script>
<script src="assets/js/jquery.blockUI.js"></script>
<script src="assets/js/jquery.nicescroll.js"></script>

<!-- App js -->
<script src="assets/js/pikeadmin.js"></script>

<!-- BEGIN Java Script for this page -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.4.0/Chart.min.js"></script>
<script src="https://cdn.datatables.net/1.10.16/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/1.10.16/js/dataTables.bootstrap4.min.js"></script>
<script src="assets/plugins/sweetalert/sweetalert.js"></script>

<script src="js/moment.min.js"></script>
<script src="./js/openrmf.js"></script>
<script src="./js/apis.js"></script>
<script src="js/jquery.blockUI.js"></script>

<!-- Counter-Up-->
<script src="assets/plugins/waypoints/lib/jquery.waypoints.min.js"></script>
<script src="assets/plugins/counterup/jquery.counterup.min.js"></script>
<script>
	$(document).ready(function() {
		// authentication first
		keycloak.init({onLoad: 'login-required' }).success(function(authenticated) {
			if (authenticated) {
        // setup the profile account and logout menu
        setupProfileMenu();
				// see if the upload menu should show
				verifyMenus();
				getChecklistTotalCount();
				getSystemTotalCount();
				getTemplateTotalCount();
				clearSessionData();
				getSystemsForDashboard();
				// counter-up
				$('.counter').counterUp({
					delay: 10,
					time: 600
				});
			}
			else {
				alert('You are not logged in. Please check your setup with Keycloak.');
			}
		}).error(function() {
			alert('Keycloak did not respond correctly. Please verify your Keycloak realm as well as Redirect URI and Web Origins information. (i.e. are you missing an \'*\' somewhere?');
		});

	} );		
</script>
<!-- END Java Script for this page -->

</body>
</html>
