<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <title>OpenRMF Metrics - OpenRMF Docs</title> <link rel="shortcut icon" href="/help/favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="/help/assets/css/just-the-docs-default.css"> <script type="text/javascript" src="/help/assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="/help/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.7.1 --> <title>OpenRMF Metrics | OpenRMF Docs</title> <meta name="generator" content="Jekyll v4.2.1" /> <meta property="og:title" content="OpenRMF Metrics" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="OpenRMF is the only open source tool to manage your DoD STIG checklists, generate NIST compliance, keep track of your security items that are Open or Not Reviewed, and shrink your timeline to submit for an ATO!" /> <meta property="og:description" content="OpenRMF is the only open source tool to manage your DoD STIG checklists, generate NIST compliance, keep track of your security items that are Open or Not Reviewed, and shrink your timeline to submit for an ATO!" /> <meta property="og:site_name" content="OpenRMF Docs" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="OpenRMF Metrics" /> <script type="application/ld+json"> {"@type":"WebPage","description":"OpenRMF is the only open source tool to manage your DoD STIG checklists, generate NIST compliance, keep track of your security items that are Open or Not Reviewed, and shrink your timeline to submit for an ATO!","url":"/help/metrics.html","headline":"OpenRMF Metrics","@context":"https://schema.org"}</script> <!-- End Jekyll SEO tag --> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="/help/" class="site-title lh-tight"> OpenRMF Docs </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="/help/" class="nav-list-link">OpenRMF Introduction</a></li><li class="nav-list-item"><a href="/help/whatsnew.html" class="nav-list-link">What's New in v1.10</a></li><li class="nav-list-item"><a href="/help/navigation.html" class="nav-list-link">Navigation in OpenRMF</a></li><li class="nav-list-item"><a href="/help/systempackages.html" class="nav-list-link">Step 1 - Create System Package</a></li><li class="nav-list-item"><a href="/help/uploading.html" class="nav-list-link">Step 2 - Uploading</a></li><li class="nav-list-item"><a href="/help/dashboard.html" class="nav-list-link">Step 3 - Your Dashboard</a></li><li class="nav-list-item"><a href="/help/systems.html" class="nav-list-link">Step 4 - View System Packages</a></li><li class="nav-list-item"><a href="/help/checklists.html" class="nav-list-link">Step 5 - View Checklists</a></li><li class="nav-list-item"><a href="/help/compliance.html" class="nav-list-link">Step 6 - Compliance Report</a></li><li class="nav-list-item"><a href="/help/artifacts.html" class="nav-list-link">Step 6 - Generate RMF Artifacts</a></li><li class="nav-list-item"><a href="/help/templates.html" class="nav-list-link">Using Template Checklists</a></li><li class="nav-list-item"><a href="/help/reports.html" class="nav-list-link">OpenRMF Reports</a></li><li class="nav-list-item active"><a href="/help/metrics.html" class="nav-list-link active">OpenRMF Metrics</a></li><li class="nav-list-item"><a href="/help/users.html" class="nav-list-link">User Profile</a></li><li class="nav-list-item"><a href="/help/permissions.html" class="nav-list-link">User Permissions</a></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search OpenRMF Docs" aria-label="Search OpenRMF Docs" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> <nav aria-label="Auxiliary" class="aux-nav"> <ul class="aux-nav-list"> <li class="aux-nav-list-item"> <a href="//www.openrmf.io/" class="site-button" > openrmf.io </a> </li> <li class="aux-nav-list-item"> <a href="//github.com/cingulara/openrmf-docs/" class="site-button" > Code on GitHub </a> </li> <li class="aux-nav-list-item"> <a href="https://join.slack.com/t/openrmftool/shared_invite/zt-ck8lqld0-8LD7k66mzj7WsIno9YFrMg" class="site-button" > Slack </a> </li> </ul> </nav> </div> <div id="main-content-wrap" class="main-content-wrap"> <div id="main-content" class="main-content" role="main"> <h1 id="using-prometheus-and-grafana-for-openrmf-metrics"> <a href="#using-prometheus-and-grafana-for-openrmf-metrics" class="anchor-heading" aria-labelledby="using-prometheus-and-grafana-for-openrmf-metrics"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Using Prometheus and Grafana for OpenRMF<sup>®</sup> Metrics </h1> <p>OpenRMF<sup>®</sup> tracks metrics used by Prometheus. We currently use the https://github.com/prometheus-net/prometheus-net component for the .NET Core Web APIs and the https://github.com/nats-io/prometheus-nats-exporter container for exporting NATS 2.0 metrics out to a Prometheus endpoint. With that information, you can setup the below Grafana dashboards to show usage, memory, requests, errors, and the like.</p> <p>The docker-compose file for running OpenRMF<sup>®</sup> locally uses a container definition for Prometheus and Grafana locally. The Kubernetes deployment does not. For Kubernetes you can hook to your existing Prometheus and Grafana setup. Or you can deploy separately to namespaces within Kubernetes and then setup the data sources there.</p> <p>For now you have to initially setup the Grafana dashboards. Starting with version 0.14 we use a volume to store the data correctly so you can set it and forget it.</p> <h2 id="net-core-default-metrics"> <a href="#net-core-default-metrics" class="anchor-heading" aria-labelledby="net-core-default-metrics"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> .NET Core Default Metrics </h2> <p>Once you have Prometheus setup, you can use the https://grafana.com/grafana/dashboards/10427 to display .NET Core metrics like the below chart.</p> <p><img src="./assets/metrics-aspnet-core-default.png" alt="Default Metrics" /></p> <h2 id="net-core-api-controller-metrics"> <a href="#net-core-api-controller-metrics" class="anchor-heading" aria-labelledby="net-core-api-controller-metrics"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> .NET Core API Controller Metrics </h2> <p>Once you have Prometheus setup, you can use the https://grafana.com/grafana/dashboards/10915 to display .NET Core metrics like the below chart.</p> <p><img src="./assets/metrics-api-controller-summary.png" alt="API Metrics" /></p> <h2 id="nats-server-metrics"> <a href="#nats-server-metrics" class="anchor-heading" aria-labelledby="nats-server-metrics"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> NATS Server Metrics </h2> <p>Once you have Prometheus setup and you deploy the container for https://github.com/nats-io/prometheus-nats-exporter, you can use the https://grafana.com/grafana/dashboards/2279 to display NATS Server Core metrics like the below chart.</p> <p><img src="./assets/metrics-nats-server.png" alt="NATS Server Metrics" /></p> <h2 id="nats-client-connection-metrics"> <a href="#nats-client-connection-metrics" class="anchor-heading" aria-labelledby="nats-client-connection-metrics"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> NATS Client Connection Metrics </h2> <p>I made a NATS metrics dashboard at https://github.com/Cingulara/nats-client-metrics that goes down to the client level. The default NATS dashboard for Grafana keeps everything at a server level for bytes in and out, messages in and out, etc. I wanted per client. So go to that URL above and add that dashboard referenced in the <a href="https://raw.githubusercontent.com/Cingulara/nats-client-metrics/master/grafana-dashboard.json">JSON file</a> to your Prometheus if you want NATS client metrics.</p> <h2 id="web-interface-metrics"> <a href="#web-interface-metrics" class="anchor-heading" aria-labelledby="web-interface-metrics"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Web Interface Metrics </h2> <p>There is also an NGINX default dashboard in the included dashboards with Grafana packaged with OpenRMF<sup>®</sup> v1.7 and beyond as well. That will show activity for the user interace of the application.</p> <h2 id="prometheus-configuration-setup"> <a href="#prometheus-configuration-setup" class="anchor-heading" aria-labelledby="prometheus-configuration-setup"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Prometheus Configuration Setup </h2> <p>The prometheus.yml file configuration we use when running the local or docker-compose setup of OpenRMF<sup>®</sup> is <a href="https://github.com/Cingulara/openrmf-docs/blob/master/scripts/prometheus.yml">here</a>. You can adjust the interval and options as required. Just restart the <code class="language-plaintext highlighter-rouge">docker-compose up -d</code> command to relaunch and use the new configuration.</p> <p>See the <a href="https://github.com/Cingulara/openrmf-docs/blob/master/metrics.md">OpenRMF Metrics in GitHub</a> information to understand how we use those tools within OpenRMF<sup>®</sup>.</p> <h2 id="additional-links"> <a href="#additional-links" class="anchor-heading" aria-labelledby="additional-links"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Additional Links </h2> <p>Prometheus: https://prometheus.io/docs/prometheus/latest/querying/basics/</p> <p>Grafana: https://grafana.com/</p> <hr> <footer> <p class="text-small text-grey-dk-100 mb-0">Copyright &copy; 2020 Cingulara and Tutela. Distributed by <a href="https://www.openrmf.io" target="_blank">openrmf.io.</a></p> </footer> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
